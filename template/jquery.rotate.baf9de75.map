{"version":3,"sources":["common/js/jquery.rotate.js"],"names":["$","supportedCSS","styles","document","getElementsByTagName","style","toCheck","split","a","length","undefined","IE","eval","rad","jQuery","fn","extend","rotate","parameters","angle","returned","i","i0","element","get","Wilq32","PhotoEffect","_handleRotation","paramClone","newRotObject","_rootObj","push","getRotateAngle","ret","_angle","stopRotate","clearTimeout","_timer","window","img","_img","_eventObj","createElement","display","parentNode","insertBefore","complete","_Loader","self","bind","prototype","_setupParameters","_parameters","animateTo","step","easing","x","t","b","c","d","duration","callback","_BindEvents","_rotate","_animateStart","events","oldEvents","hasOwnProperty","unbind","width","height","removeChild","_vimage","createVMLNode","src","position","top","left","_container","setAttribute","appendChild","getAttribute","className","_width","_height","_widthHalf","_heightHalf","_widthMax","Math","sqrt","_widthAdd","_heightAdd","_widthAddHalf","_heightAddHalf","_aspectW","parseInt","_aspectH","_canvas","_cnv","getContext","_animateStartTime","Date","_animateStartAngle","_animate","actualTime","checkEnd","animatedGif","setTimeout","call","PI","rotation","translate","scale","drawImage","createStyleSheet","addRule","namespaces","rvml","add","tagName","e"],"mappings":"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","file":"jquery.rotate.baf9de75.map","sourceRoot":"..","sourcesContent":["// VERSION: 2.2 LAST UPDATE: 13.03.2012\n/* \n * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php\n * \n * Made by Wilq32, wilq32@gmail.com, Wroclaw, Poland, 01.2009\n * Website: http://code.google.com/p/jqueryrotate/ \n */\n\n// Documentation removed from script file (was kinda useless and outdated)\n\n(function($) {\nvar supportedCSS,styles=document.getElementsByTagName(\"head\")[0].style,toCheck=\"transformProperty WebkitTransform OTransform msTransform MozTransform\".split(\" \");\nfor (var a=0;a<toCheck.length;a++) if (styles[toCheck[a]] !== undefined) supportedCSS = toCheck[a];\n// Bad eval to preven google closure to remove it from code o_O\n// After compresion replace it back to var IE = 'v' == '\\v'\nvar IE = eval('\"v\"==\"\\v\"');\n\njQuery.fn.extend({\n    rotate:function(parameters)\n    {\n        if (this.length===0||typeof parameters==\"undefined\") return;\n            if (typeof parameters==\"number\") parameters={angle:parameters};\n        var returned=[];\n        for (var i=0,i0=this.length;i<i0;i++)\n            {\n                var element=this.get(i);\t\n                if (!element.Wilq32 || !element.Wilq32.PhotoEffect) {\n\n                    var paramClone = $.extend(true, {}, parameters); \n                    var newRotObject = new Wilq32.PhotoEffect(element,paramClone)._rootObj;\n\n                    returned.push($(newRotObject));\n                }\n                else {\n                    element.Wilq32.PhotoEffect._handleRotation(parameters);\n                }\n            }\n            return returned;\n    },\n    getRotateAngle: function(){\n        var ret = [];\n        for (var i=0,i0=this.length;i<i0;i++)\n            {\n                var element=this.get(i);\t\n                if (element.Wilq32 && element.Wilq32.PhotoEffect) {\n                    ret[i] = element.Wilq32.PhotoEffect._angle;\n                }\n            }\n            return ret;\n    },\n    stopRotate: function(){\n        for (var i=0,i0=this.length;i<i0;i++)\n            {\n                var element=this.get(i);\t\n                if (element.Wilq32 && element.Wilq32.PhotoEffect) {\n                    clearTimeout(element.Wilq32.PhotoEffect._timer);\n                }\n            }\n    }\n});\n\n// Library agnostic interface\n\nWilq32=window.Wilq32||{};\nWilq32.PhotoEffect=(function(){\n\n\tif (supportedCSS) {\n\t\treturn function(img,parameters){\n\t\t\timg.Wilq32 = {\n\t\t\t\tPhotoEffect: this\n\t\t\t};\n            \n            this._img = this._rootObj = this._eventObj = img;\n            this._handleRotation(parameters);\n\t\t}\n\t} else {\n\t\treturn function(img,parameters) {\n\t\t\t// Make sure that class and id are also copied - just in case you would like to refeer to an newly created object\n            this._img = img;\n\n\t\t\tthis._rootObj=document.createElement('span');\n\t\t\tthis._rootObj.style.display=\"inline-block\";\n\t\t\tthis._rootObj.Wilq32 = \n\t\t\t\t{\n\t\t\t\t\tPhotoEffect: this\n\t\t\t\t};\n\t\t\timg.parentNode.insertBefore(this._rootObj,img);\n\t\t\t\n\t\t\tif (img.complete) {\n\t\t\t\tthis._Loader(parameters);\n\t\t\t} else {\n\t\t\t\tvar self=this;\n\t\t\t\t// TODO: Remove jQuery dependency\n\t\t\t\tjQuery(this._img).bind(\"load\", function()\n\t\t\t\t{\n\t\t\t\t\tself._Loader(parameters);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n})();\n\nWilq32.PhotoEffect.prototype={\n    _setupParameters : function (parameters){\n\t\tthis._parameters = this._parameters || {};\n        if (typeof this._angle !== \"number\") this._angle = 0 ;\n        if (typeof parameters.angle===\"number\") this._angle = parameters.angle;\n        this._parameters.animateTo = (typeof parameters.animateTo===\"number\") ? (parameters.animateTo) : (this._angle); \n\n        this._parameters.step = parameters.step || this._parameters.step || null;\n\t\tthis._parameters.easing = parameters.easing || this._parameters.easing || function (x, t, b, c, d) { return -c * ((t=t/d-1)*t*t*t - 1) + b; }\n\t\tthis._parameters.duration = parameters.duration || this._parameters.duration || 1000;\n        this._parameters.callback = parameters.callback || this._parameters.callback || function(){};\n        if (parameters.bind && parameters.bind != this._parameters.bind) this._BindEvents(parameters.bind); \n\t},\n\t_handleRotation : function(parameters){\n          this._setupParameters(parameters);\n          if (this._angle==this._parameters.animateTo) {\n              this._rotate(this._angle);\n          }\n          else { \n              this._animateStart();          \n          }\n\t},\n\n\t_BindEvents:function(events){\n\t\tif (events && this._eventObj) \n\t\t{\n            // Unbinding previous Events\n            if (this._parameters.bind){\n                var oldEvents = this._parameters.bind;\n                for (var a in oldEvents) if (oldEvents.hasOwnProperty(a)) \n                        // TODO: Remove jQuery dependency\n                        jQuery(this._eventObj).unbind(a,oldEvents[a]);\n            }\n\n            this._parameters.bind = events;\n\t\t\tfor (var a in events) if (events.hasOwnProperty(a)) \n\t\t\t\t// TODO: Remove jQuery dependency\n\t\t\t\t\tjQuery(this._eventObj).bind(a,events[a]);\n\t\t}\n\t},\n\n\t_Loader:(function()\n\t{\n\t\tif (IE)\n\t\treturn function(parameters)\n\t\t{\n\t\t\tvar width=this._img.width;\n\t\t\tvar height=this._img.height;\n\t\t\tthis._img.parentNode.removeChild(this._img);\n\t\t\t\t\t\t\t\n\t\t\tthis._vimage = this.createVMLNode('image');\n\t\t\tthis._vimage.src=this._img.src;\n\t\t\tthis._vimage.style.height=height+\"px\";\n\t\t\tthis._vimage.style.width=width+\"px\";\n\t\t\tthis._vimage.style.position=\"absolute\"; // FIXES IE PROBLEM - its only rendered if its on absolute position!\n\t\t\tthis._vimage.style.top = \"0px\";\n\t\t\tthis._vimage.style.left = \"0px\";\n\n\t\t\t/* Group minifying a small 1px precision problem when rotating object */\n\t\t\tthis._container =  this.createVMLNode('group');\n\t\t\tthis._container.style.width=width;\n\t\t\tthis._container.style.height=height;\n\t\t\tthis._container.style.position=\"absolute\";\n\t\t\tthis._container.setAttribute('coordsize',width-1+','+(height-1)); // This -1, -1 trying to fix ugly problem with small displacement on IE\n\t\t\tthis._container.appendChild(this._vimage);\n\t\t\t\n\t\t\tthis._rootObj.appendChild(this._container);\n\t\t\tthis._rootObj.style.position=\"relative\"; // FIXES IE PROBLEM\n\t\t\tthis._rootObj.style.width=width+\"px\";\n\t\t\tthis._rootObj.style.height=height+\"px\";\n\t\t\tthis._rootObj.setAttribute('id',this._img.getAttribute('id'));\n\t\t\tthis._rootObj.className=this._img.className;\t\t\t\n\t\t    this._eventObj = this._rootObj;\t\n\t\t    this._handleRotation(parameters);\t\n\t\t}\n\t\telse\n\t\treturn function (parameters)\n\t\t{\n\t\t\tthis._rootObj.setAttribute('id',this._img.getAttribute('id'));\n\t\t\tthis._rootObj.className=this._img.className;\n\t\t\t\n\t\t\tthis._width=this._img.width;\n\t\t\tthis._height=this._img.height;\n\t\t\tthis._widthHalf=this._width/2; // used for optimisation\n\t\t\tthis._heightHalf=this._height/2;// used for optimisation\n\t\t\t\n\t\t\tvar _widthMax=Math.sqrt((this._height)*(this._height) + (this._width) * (this._width));\n\n\t\t\tthis._widthAdd = _widthMax - this._width;\n\t\t\tthis._heightAdd = _widthMax - this._height;\t// widthMax because maxWidth=maxHeight\n\t\t\tthis._widthAddHalf=this._widthAdd/2; // used for optimisation\n\t\t\tthis._heightAddHalf=this._heightAdd/2;// used for optimisation\n\t\t\t\n\t\t\tthis._img.parentNode.removeChild(this._img);\t\n\t\t\t\n\t\t\tthis._aspectW = ((parseInt(this._img.style.width,10)) || this._width)/this._img.width;\n\t\t\tthis._aspectH = ((parseInt(this._img.style.height,10)) || this._height)/this._img.height;\n\t\t\t\n\t\t\tthis._canvas=document.createElement('canvas');\n\t\t\tthis._canvas.setAttribute('width',this._width);\n\t\t\tthis._canvas.style.position=\"relative\";\n\t\t\tthis._canvas.style.left = -this._widthAddHalf + \"px\";\n\t\t\tthis._canvas.style.top = -this._heightAddHalf + \"px\";\n\t\t\tthis._canvas.Wilq32 = this._rootObj.Wilq32;\n\t\t\t\n\t\t\tthis._rootObj.appendChild(this._canvas);\n\t\t\tthis._rootObj.style.width=this._width+\"px\";\n\t\t\tthis._rootObj.style.height=this._height+\"px\";\n            this._eventObj = this._canvas;\n\t\t\t\n\t\t\tthis._cnv=this._canvas.getContext('2d');\n            this._handleRotation(parameters);\n\t\t}\n\t})(),\n\n\t_animateStart:function()\n\t{\t\n\t\tif (this._timer) {\n\t\t\tclearTimeout(this._timer);\n\t\t}\n\t\tthis._animateStartTime = +new Date;\n\t\tthis._animateStartAngle = this._angle;\n\t\tthis._animate();\n\t},\n    _animate:function()\n    {\n         var actualTime = +new Date;\n         var checkEnd = actualTime - this._animateStartTime > this._parameters.duration;\n\n         // TODO: Bug for animatedGif for static rotation ? (to test)\n         if (checkEnd && !this._parameters.animatedGif) \n         {\n             clearTimeout(this._timer);\n         }\n         else \n         {\n             if (this._canvas||this._vimage||this._img) {\n                 var angle = this._parameters.easing(0, actualTime - this._animateStartTime, this._animateStartAngle, this._parameters.animateTo - this._animateStartAngle, this._parameters.duration);\n                 this._rotate((~~(angle*10))/10);\n             }\n             if (this._parameters.step) {\n                this._parameters.step(this._angle);\n             }\n             var self = this;\n             this._timer = setTimeout(function()\n                     {\n                     self._animate.call(self);\n                     }, 10);\n         }\n\n         // To fix Bug that prevents using recursive function in callback I moved this function to back\n         if (this._parameters.callback && checkEnd){\n             this._angle = this._parameters.animateTo;\n             this._rotate(this._angle);\n             this._parameters.callback.call(this._rootObj);\n         }\n     },\n\n\t_rotate : (function()\n\t{\n\t\tvar rad = Math.PI/180;\n\t\tif (IE)\n\t\treturn function(angle)\n\t\t{\n            this._angle = angle;\n\t\t\tthis._container.style.rotation=(angle%360)+\"deg\";\n\t\t}\n\t\telse if (supportedCSS)\n\t\treturn function(angle){\n            this._angle = angle;\n\t\t\tthis._img.style[supportedCSS]=\"rotate(\"+(angle%360)+\"deg)\";\n\t\t}\n\t\telse \n\t\treturn function(angle)\n\t\t{\n            this._angle = angle;\n\t\t\tangle=(angle%360)* rad;\n\t\t\t// clear canvas\t\n\t\t\tthis._canvas.width = this._width+this._widthAdd;\n\t\t\tthis._canvas.height = this._height+this._heightAdd;\n\t\t\t\t\t\t\n\t\t\t// REMEMBER: all drawings are read from backwards.. so first function is translate, then rotate, then translate, translate..\n\t\t\tthis._cnv.translate(this._widthAddHalf,this._heightAddHalf);\t// at least center image on screen\n\t\t\tthis._cnv.translate(this._widthHalf,this._heightHalf);\t\t\t// we move image back to its orginal \n\t\t\tthis._cnv.rotate(angle);\t\t\t\t\t\t\t\t\t\t// rotate image\n\t\t\tthis._cnv.translate(-this._widthHalf,-this._heightHalf);\t\t// move image to its center, so we can rotate around its center\n\t\t\tthis._cnv.scale(this._aspectW,this._aspectH); // SCALE - if needed ;)\n\t\t\tthis._cnv.drawImage(this._img, 0, 0);\t\t\t\t\t\t\t// First - we draw image\n\t\t}\n\n\t})()\n}\n\nif (IE)\n{\nWilq32.PhotoEffect.prototype.createVMLNode=(function(){\ndocument.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\n\t\ttry {\n\t\t\t!document.namespaces.rvml && document.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\n\t\t\treturn function (tagName) {\n\t\t\t\treturn document.createElement('<rvml:' + tagName + ' class=\"rvml\">');\n\t\t\t};\n\t\t} catch (e) {\n\t\t\treturn function (tagName) {\n\t\t\t\treturn document.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">');\n\t\t\t};\n\t\t}\t\t\n})();\n}\n\n})(jQuery);\n"]}