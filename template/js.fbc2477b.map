{"version":3,"sources":["template7/js/index.js"],"names":["$maskRule","$","$mask","$winning","$card","$close","win","show","addClass","setTimeout","click","hide","removeClass","queryString","name","replace","regexS","results","RegExp","exec","window","location","search","decodeURIComponent","tips","$ring","$prize","$btn","$change","$li","$sNum","$eNum","$info","data","count","bool","init","setInterval","toggleClass","rotateFn","awards","angle","text","stopRotate","rotate","duration","animateTo","callback","sNum","eNum","eq","html","css","alert","clickFn","Math","floor","random","length"],"mappings":"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","file":"js.fbc2477b.map","sourceRoot":"..","sourcesContent":["var $maskRule = $(\"#mask-rule\"),//规则遮罩层\n  $mask = $(\"#mask\"),//红包遮罩层\n  $winning = $(\".winning\"),//红包\n  $card = $(\"#card\"),\n  $close = $(\"#close\");\n//link = false;//判断是否在链接跳转中\n\n//规则\n$(\".rule\").click(function () {\n  $maskRule.show();\n});\n$(\"#close-rule\").click(function () {\n  $maskRule.hide();\n});\n\n/*中奖信息提示*/\nfunction win() {\n  //遮罩层显示\n  $mask.show();\n  $winning.addClass(\"reback\");\n  setTimeout(function () {\n    $card.addClass(\"pull\");\n  }, 500);\n\n  //关闭弹出层\n  $(\"#close,.win,.btn\").click(function () {\n    //$close.click(function () {\n    $mask.hide();\n    $winning.removeClass(\"reback\");\n    $card.removeClass(\"pull\");\n  });\n}\n\n//此处可以在commonjs中合并\nfunction queryString(name) {\n  name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n  var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return \"\";\n  }\n  else {\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n}\n\n$(function () {\n    var tips = [\"超级豪华大礼\", \"100元现金红包\", \"50元现金红包\", \"20元现金红包\", \"谢谢参与~\"],//中奖提示\n        $ring = $(\".ring\"),\n        $prize = $(\".prize\"),//转盘\n        $btn = $(\"#btn\"),//按钮\n        $change = $(\"#change\"),//显示剩余抽奖机会\n        $li = $(\".scroll li\"),//中奖信息滚动的盒子\n        $sNum = $(\".start-num\"),//手机头号，三位数\n        $eNum = $(\".end-num\"),//手机尾号，四位数\n        $info = $(\".info\"),//中奖提示信息\n        data = {count: 5},//次数\n        bool = false,//判断是否在旋转，true表示是，false表示否\n        timer;//定时器\n\n    init();\n    function init() {\n        timer = setInterval(function () {\n            $ring.toggleClass(\"light\");\n        }, 1000);\n    }\n\n    //点击抽奖\n    $btn.click(function () {\n        if (bool) return; // 如果在执行就退出\n        bool = true; // 标志为 在执行\n        if (data.count <= 0) { //当抽奖次数为0时\n            $change.html(0);//次数显示为0\n            bool = false;\n            alert(\"没有次数了\");\n        } else { //还有次数就执行\n            data.count--;\n            data.count <= 0 && (data.count = 0);\n            $change.html(data.count);//显示剩余次数\n            $prize.removeClass(\"running\");\n            clickFn();\n        }\n    });\n\n    //随机概率\n    function clickFn() {\n        var data = [1, 2, 3, 4, 5, 6];//抽奖概率\n        //data为随机出来的结果，根据概率后的结果\n        data = data[Math.floor(Math.random() * data.length)];//1-6的随机数\n        switch (data) {//中奖概率，可控。根据得到的随机数控制奖品\n            case 1:\n                rotateFn(1, 0, tips[0]);\n                break;\n            case 2:\n                rotateFn(2, 0, tips[0]);\n                break;\n            case 3:\n                rotateFn(3, 120, tips[1]);\n                break;\n            case 4:\n                rotateFn(4, 120, tips[1]);\n                break;\n            case 5:\n                rotateFn(5, -60, tips[2]);\n                break;\n            case 6:\n                rotateFn(6, -120, tips[3]);\n                break;\n        }\n    }\n\n    //选中函数。参数：奖品序号、角度、提示文字\n    function rotateFn(awards, angle, text) {\n        /*手机号的处理\n        var arr = [13477735912, 13100656035, 15926909285];\n        var a = arr[0] + \"\";\n        var f = a.substr(0, 3);\n        var l = a.substr(7, 4);*/\n        bool = true;\n        $prize.stopRotate();\n        $prize.rotate({\n            angle: 0,//旋转的角度数\n            duration: 4000, //旋转时间\n            animateTo: angle + 1440, //给定的角度,让它根据得出来的结果加上1440度旋转。也就是至少转4圈\n            callback: function () {\n                bool = false; // 标志为 执行完毕\n                win();\n                show(1, 1, text);\n            }\n        });\n    }\n\n    //中奖信息滚动。前两个参数为手机号前三位和后四位手机尾号，text为中的什么奖品\n    function show(sNum, eNum, text) {\n        //最新中奖信息\n        $sNum.eq(2).html(sNum);\n        $eNum.eq(2).html(eNum);\n        $info.eq(2).html(text);\n        $li.css(\"top\", \"-\" + 40 / 75 + \"rem\");//滚动\n        //滚动之后的处理\n        setTimeout(function () {\n            $li.css({\n                \"top\": \"0\",\n                \"transition\": \"all 0s ease-in-out\"\n            });\n            //更新中奖信息\n            $sNum.eq(0).html($sNum.eq(1).html());\n            $eNum.eq(0).html($eNum.eq(1).html());\n            $info.eq(0).html($info.eq(1).html());\n            $info.eq(1).html($info.eq(2).html());\n            $sNum.eq(1).html($sNum.eq(2).html());\n            $eNum.eq(1).html($eNum.eq(2).html());\n        }, 500);\n        $li.css(\"transition\", \"all 0.5s ease-in-out\");\n    }\n\n    //中奖信息提示\n    $(\"#close,.win,.btn\").click(function () {\n        $prize.addClass(\"running\");\n        init();\n    });\n});\n\n"]}