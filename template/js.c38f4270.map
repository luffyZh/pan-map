{"version":3,"sources":["template3/js/index.js"],"names":["$maskRule","$","$mask","$winning","$card","$close","win","show","addClass","setTimeout","click","hide","removeClass","queryString","name","replace","regexS","results","RegExp","exec","window","location","search","decodeURIComponent","$cards","timer","$maskCard","length","index","data","initArr","clickTime","bool","init","i","seat","eq","css","left","top","clearTimeout","setInterval","on","Date","clearInterval","off","alert","Swiper","direction","loop","slidesPerView"],"mappings":";AAAA,IAAIA,EAAYC,EAAE,cAChBC,EAAQD,EAAE,SACVE,EAAWF,EAAE,YACbG,EAAQH,EAAE,SACVI,EAASJ,EAAE,UAYb,SAASK,IAEPJ,EAAMK,OACNJ,EAASK,SAAS,UAClBC,WAAW,WACTL,EAAMI,SAAS,SACd,KAGHP,EAAE,oBAAoBS,MAAM,WAE1BR,EAAMS,OACNR,EAASS,YAAY,UACrBR,EAAMQ,YAAY,UAKtB,SAASC,EAAYC,GACnBA,EAAOA,EAAKC,QAAQ,OAAQ,OAAQA,QAAQ,OAAQ,OAChDC,IAEAC,EADQ,IAAIC,OADH,SAAWJ,EAAO,aAEXK,KAAKC,OAAOC,SAASC,QACrCL,OAAY,OAAZA,EACK,GAGAM,mBAAmBN,EAAQ,GAAGF,QAAQ,MAAO,MAnCxDd,EAAE,SAASS,MAAM,WACfV,EAAUO,SAEZN,EAAE,eAAeS,MAAM,WACrBV,EAAUW,SAkCZV,EAAE,WACMuB,IASAC,EATAD,EAASvB,EAAE,WACXyB,EAAYzB,EAAE,cACd0B,EAASH,EAAOG,OAChBC,EAAQD,EACRE,EAAe,EAEfC,EAAU,CAAC,CAAC,GADN,GACgB,GAAI,CAAC,KAAW,GAAI,CAAC,IADrC,GACgD,GAAI,CAAC,GADrD,GAC+D,IAD/D,IAC2E,CAAC,KAAW,IADvF,IACmG,CAAC,IADpG,GAC+G,IAD/G,KAENC,EAAY,EACZC,GAAO,EAIFC,SAAAA,IAEA,IAAA,IAAIC,EAAI,EAAGA,EAAIP,EAAQO,KACvB,SAAUA,GACHC,IAAAA,EAAO1B,WAAW,WAClBe,EAAOY,GAAGF,GAAGG,IAAI,CACbC,KAAMR,EAAQI,GAAG,GAAK,MACtBK,IAAKT,EAAQI,GAAG,GAAK,QAEzBM,aAAaL,IACd,IAAMD,GAPZ,CAQEA,GAIPzB,WAAW,WACPgB,EAAQgB,YAAY,WAChBT,GAAO,EACPR,EAAOY,GAAGR,EAAQ,GAAGhB,YAAY,UACjCgB,GAAS,EACTJ,EAAOY,GAAGR,GAAOpB,SAAS,UAC1BoB,KACD,MACJ,KAxBPK,IA4BAhC,EAAE,QAAQyC,GAAG,QAAS,KAAM,WACpB,IAAIC,KAASZ,EAAY,KAAQC,IAC7BH,EAAa,GAIbH,EAAUnB,OACVqC,cAAcnB,GACdD,EAAOZ,YAAY,UACnBX,EAAE,MAAMO,SAAS,aAGjBP,EAAE,MAAMyC,GAAG,eAAgB,WACvBzC,EAAE,MAAMW,YAAY,aACpBY,EAAOa,IAAI,CACPC,KAAM,IAjDhB,GAiD4B,MAClBC,IAAK,IAlDf,GAkD2B,QAErBb,EAAUf,OACVL,IACAL,EAAE,MAAM4C,IAAI,mBAGhBC,MAAM,aAMlB7C,EAAE,oBAAoBS,MAAM,WACxBqB,EAAY,IAAIY,KAChBf,EAAQD,EACRM,MAIO,IAAIc,OAAO,oBAAqB,CACvCC,UAAW,aACXC,MAAM,EACNC,cAAe","file":"js.c38f4270.map","sourceRoot":"..","sourcesContent":["var $maskRule = $(\"#mask-rule\"),//规则遮罩层\n  $mask = $(\"#mask\"),//红包遮罩层\n  $winning = $(\".winning\"),//红包\n  $card = $(\"#card\"),\n  $close = $(\"#close\");\n//link = false;//判断是否在链接跳转中\n\n//规则\n$(\".rule\").click(function () {\n  $maskRule.show();\n});\n$(\"#close-rule\").click(function () {\n  $maskRule.hide();\n});\n\n/*中奖信息提示*/\nfunction win() {\n  //遮罩层显示\n  $mask.show();\n  $winning.addClass(\"reback\");\n  setTimeout(function () {\n    $card.addClass(\"pull\");\n  }, 500);\n\n  //关闭弹出层\n  $(\"#close,.win,.btn\").click(function () {\n    //$close.click(function () {\n    $mask.hide();\n    $winning.removeClass(\"reback\");\n    $card.removeClass(\"pull\");\n  });\n}\n\n//此处可以在commonjs中合并\nfunction queryString(name) {\n  name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n  var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return \"\";\n  }\n  else {\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n}\n$(function () {\n    var $cards = $(\".box li\"),//所有卡牌\n        $maskCard = $(\"#mask-card\"),//翻牌遮罩\n        length = $cards.length,\n        index = length,//轮流滚动的卡牌下标\n        data = {count: 5},//次数\n        rem = 75,\n        initArr = [[34 / rem, 0], [273 / rem, 0], [512 / rem, 0], [34 / rem, 268 / rem], [273 / rem, 268 / rem], [512 / rem, 268 / rem]],//卡牌位置数组\n        clickTime = 0,\n        bool = false,//首次点击时不能在卡牌归位期间\n        timer;//轮流提示定时器\n\n    init();\n    function init() {\n        //卡牌归位动画\n        for (var i = 0; i < length; i++) {\n            (function (i) {\n                var seat = setTimeout(function () {\n                    $cards.eq(i).css({\n                        left: initArr[i][0] + \"rem\",\n                        top: initArr[i][1] + \"rem\"\n                    });\n                    clearTimeout(seat);\n                }, 300 * i);\n            })(i);\n        }\n\n        //卡牌轮流选中动画\n        setTimeout(function () {\n            timer = setInterval(function () {\n                bool = true;//卡牌归位，可以点击\n                $cards.eq(index - 1).removeClass(\"active\");\n                index %= 6;\n                $cards.eq(index).addClass(\"active\");\n                index++;\n            }, 1000);\n        }, 1000);\n    }\n\n    //点击卡牌翻转\n    $(\".box\").on(\"click\", \"li\", function () {\n        if (new Date() - clickTime > 2000 && bool) {//两次点击的间隔不能小于2秒\n            if (data.count > 0) {\n                /*console.log(222);\n                data.count--;\n                $(\"#change\").html(data.count);*/\n                $maskCard.show();\n                clearInterval(timer);//清除轮流选中动画\n                $cards.removeClass(\"active\");//清除轮流滚动类名\n                $(this).addClass(\"open-card\");//添加翻牌动画\n\n                //动画监听\n                $(this).on(\"animationend\", function () {\n                    $(this).removeClass(\"open-card\");//移除翻牌动画\n                    $cards.css({//所有卡牌放到右下角\n                        left: 512 / rem + \"rem\",\n                        top: 268 / rem + \"rem\"\n                    });\n                    $maskCard.hide();\n                    win();\n                    $(this).off(\"animationend\");//解绑动画监听\n                });\n            } else {\n                alert(\"没有次数了~\");\n            }\n        }\n    });\n\n    //中奖信息提示\n    $(\"#close,.win,.btn\").click(function () {\n        clickTime = new Date();//时间更新\n        index = length;//卡牌选中重新从第一张开始\n        init();\n    });\n\n    //奖品展示\n    var show = new Swiper(\".swiper-container\", {\n        direction: \"horizontal\",//水平方向滑动。 vertical为垂直方向滑动\n        loop: false,//是否循环\n        slidesPerView: \"auto\"//自动根据slides的宽度来设定数量\n    });\n});\n\n\n\n\n\n\n\n\n\n\n"]}