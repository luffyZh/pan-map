{"version":3,"sources":["template5/js/index.js"],"names":["$maskRule","$","$mask","$winning","$card","$close","win","show","addClass","setTimeout","click","hide","removeClass","queryString","name","replace","regexS","results","RegExp","exec","window","location","search","decodeURIComponent","data","count","WIDTH","timer","document","documentElement","clientWidth","$balloon","$arrow","$top","$bottom","arr","offset","left","top","width","height","offsetTop","bool","rem","on","e","event","preventDefault","touches","changedTouches","x","pageX","ringMove","l","t","i","animate","zIndex","eq","opacity","css","j","length","clearTimeout","pageY","alert","html"],"mappings":"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","file":"js.b57e55e0.map","sourceRoot":"..","sourcesContent":["var $maskRule = $(\"#mask-rule\"),//规则遮罩层\n  $mask = $(\"#mask\"),//红包遮罩层\n  $winning = $(\".winning\"),//红包\n  $card = $(\"#card\"),\n  $close = $(\"#close\");\n//link = false;//判断是否在链接跳转中\n\n//规则\n$(\".rule\").click(function () {\n  $maskRule.show();\n});\n$(\"#close-rule\").click(function () {\n  $maskRule.hide();\n});\n\n/*中奖信息提示*/\nfunction win() {\n  //遮罩层显示\n  $mask.show();\n  $winning.addClass(\"reback\");\n  setTimeout(function () {\n    $card.addClass(\"pull\");\n  }, 500);\n\n  //关闭弹出层\n  $(\"#close,.win,.btn\").click(function () {\n    //$close.click(function () {\n    $mask.hide();\n    $winning.removeClass(\"reback\");\n    $card.removeClass(\"pull\");\n  });\n}\n\n//此处可以在commonjs中合并\nfunction queryString(name) {\n  name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n  var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return \"\";\n  }\n  else {\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n}\n\nconst data = {\n  count: 5\n}\n\n$(function () {\n    var WIDTH = document.documentElement.clientWidth,//屏幕宽度\n        $balloon = $(\".balloon\"),//所有气球\n        $arrow = $(\".arrow\"),//箭头\n        $top = $(\".top\"),//上方套环\n        $bottom = $(\".bottom\"),//下方套环\n        arr = [//存入套环和气球的相关数值\n            [$top.offset().left, $top.offset().top, $top.width(), $top.height()],\n            [$bottom.offset().left, $bottom.offset().top, $bottom.width(), $bottom.height()],\n            [$balloon[0].offsetTop, $balloon[1].offsetTop, $balloon[2].offsetTop, $balloon[3].offsetTop]\n        ],\n        bool = true,//点击开关，ture为可点击\n        rem = 75, timer;\n\n    $(\".top,.bottom\").on(\"touchstart\",function (e) {\n        e = e || window.event;\n        e.preventDefault();\n        typeof e.touches !== 'undefined' && (e = e.touches[0]);\n        return false;\n    });\n\n    //松开\n    $(\".top,.bottom\").on('touchend', function (e) {\n        e = e || window.event;\n        e.preventDefault();\n        typeof e.touches !== 'undefined' && (e = e.changedTouches[0]);//离开触点\n        var x = e.pageX, y = e.pageY;\n        if (y > $top.offset().top) return;//必须要向上滑出一段距离\n\n        //common\n        if (!bool) return;\n        if (data.count <= 0) {\n            alert(\"没有次数了\");\n            return;\n        }\n        bool = false;\n        data.count--;\n        $(\"#change\").html(data.count);\n        //common end\n\n        //移除动画\n        $balloon.removeClass(\"shake-l\");\n        $balloon.removeClass(\"shake-r\");\n        $arrow.hide();\n\n        (x <= WIDTH * 0.25) && ringMove(20, 315, 0);//第1个\n        (x > WIDTH * 0.25 && x <= WIDTH * 0.5) && ringMove(210, 390, 1);//第2个\n        (x > WIDTH * 0.5 && x <= WIDTH * 0.75) && ringMove(412, 315, 2);//第3个\n        (x > WIDTH * 0.75) && ringMove(590, 320, 3);//第4个\n\n        function ringMove(l, t, i) {//left、top、气球下标\n            $top.animate({//套环的移动变化\n                left: l / rem + \"rem\",\n                top: t / rem + \"rem\",\n                zIndex: 0,\n                width: 135 / rem + \"rem\",\n                height: 30 / rem + \"rem\"\n            }, 1000);\n            $bottom.animate({//套环的移动变化\n                left: l / rem + \"rem\",\n                top: (t + 28) / rem + \"rem\",\n                width: 135 / rem + \"rem\",\n                height: 30 / rem + \"rem\"\n            }, 1000, function () {\n                $top.addClass(\"shakeing\");\n                $bottom.addClass(\"shakeing\");\n                $top.animate({top: (t + rem) / rem + \"rem\"}, 800);\n\n                $bottom.animate({top: (28 + t + rem) / rem + \"rem\"}, 800, function () {\n                    $balloon.eq(i).animate({\n                        opacity: 0,\n                        top: \"-\" + rem\n                    }, 1000, function () {\n                        $balloon.eq(i).css(\"top\", (arr[2][i] + rem) + \"px\");//气球回到原位置下方\n                        //红包弹出\n                        win();\n                        $top.css({//套环归位\n                            left: arr[0][0],\n                            top: arr[0][1],\n                            width: arr[0][2],\n                            height: arr[0][3]\n                        });\n                        $bottom.css({//套环归位\n                            left: arr[1][0],\n                            top: arr[1][1],\n                            width: arr[1][2],\n                            height: arr[1][3]\n                        });\n                        $top.removeClass(\"shakeing\");\n                        $bottom.removeClass(\"shakeing\");\n                        $arrow.show();\n                        $balloon.addClass(\"shake-l\");\n                        for (var j = 0, length = $balloon.length; j < length; j++) {\n                            if (j > 3) {\n                                $balloon.eq(j).removeClass(\"shake-l\");\n                                $balloon.eq(j).addClass(\"shake-r\");\n                            }\n                        }\n\n                        //close\n                        clearTimeout(timer);\n                        $(\"#close,.win,.btn\").click(function () {\n                            $balloon.eq(i).animate({//气球归位\n                                opacity: 1,\n                                top: arr[2][i]\n                            }, 1000);\n                            timer = setTimeout(function () {\n                                bool = true;\n                            }, 1000);\n                        });\n                    });\n                });\n            });\n        }\n\n    });\n\n});\n\n\n\n\n\n\n\n\n\n"]}