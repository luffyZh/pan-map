{"version":3,"sources":["template6/js/index.js"],"names":["$maskRule","$","$mask","$winning","$card","$close","win","show","addClass","setTimeout","click","hide","removeClass","queryString","name","replace","regexS","results","RegExp","exec","window","location","search","decodeURIComponent","prizeArr","clickTimer","timer1","timer2","timer3","$li","$sNum","$eNum","$info","$go","$hand","$roll","topRoll","parseInt","eq","css","prizeHigh","height","topArr","data","count","bool","animate","r","i","index","parseFloat","alert","html","clearTimeout","left","top","clickFn","clearInterval","random","roll","sNum","eNum","text","Swiper","direction","loop","slidesPerView"],"mappings":"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","file":"js.3f4ac8ae.map","sourceRoot":"..","sourcesContent":["var $maskRule = $(\"#mask-rule\"),//规则遮罩层\n  $mask = $(\"#mask\"),//红包遮罩层\n  $winning = $(\".winning\"),//红包\n  $card = $(\"#card\"),\n  $close = $(\"#close\");\n//link = false;//判断是否在链接跳转中\n\n//规则\n$(\".rule\").click(function () {\n  $maskRule.show();\n});\n$(\"#close-rule\").click(function () {\n  $maskRule.hide();\n});\n\n/*中奖信息提示*/\nfunction win() {\n  //遮罩层显示\n  $mask.show();\n  $winning.addClass(\"reback\");\n  setTimeout(function () {\n    $card.addClass(\"pull\");\n  }, 500);\n\n  //关闭弹出层\n  $(\"#close,.win,.btn\").click(function () {\n    //$close.click(function () {\n    $mask.hide();\n    $winning.removeClass(\"reback\");\n    $card.removeClass(\"pull\");\n  });\n}\n\n//此处可以在commonjs中合并\nfunction queryString(name) {\n  name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n  var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return \"\";\n  }\n  else {\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n}\n\n$(function () {\n    var prizeArr = [\"豪华礼包\", \"索尼相机\", \"平板电脑\"],//奖品内容\n        $li = $(\".info li\"),//中奖信息滚动的盒子\n        $sNum = $(\".start-num\"),//手机头号，三位数\n        $eNum = $(\".end-num\"),//手机尾号，四位数\n        $info = $(\".prize\"),//中奖提示信息\n        $go = $(\"#go\"),\n        $hand = $(\"#hand\"),\n        $roll = $(\".roll ul\"),\n        topRoll = parseInt($roll.eq(0).css(\"top\")),//滚动盒子的top\n        prizeHigh = parseInt($(\".prize1\").eq(0).height()),//奖品高度\n        topArr = [topRoll, topRoll - prizeHigh, topRoll - prizeHigh * 2],//三个奖品的位置\n        data = {count: 5},//次数\n        bool = true,//true为可点击\n        clickTimer, timer1, timer2, timer3;\n\n    //开始按钮\n    $go.click(function () {\n        if (!bool) return;\n        if (data.count <= 0) {\n            alert(\"没有次数了\");\n            return;\n        }\n        bool = false;\n        data.count--;\n        $(\"#change\").html(data.count);\n\n        clearTimeout(clickTimer);\n        $hand.removeClass(\"shak\");//移除手摇晃动画\n        $hand.animate({\n            left: 50 + \"%\",\n            top: 40 + \"%\"\n        }, 500, function () {\n            $hand.css(\"transform\", \"rotate(-20deg)\");//按下按钮\n            clickTimer = setTimeout(function () {\n                $hand.css(\"transform\", \"rotate(0deg)\");//抬起\n                $hand.animate({\n                    left: 60 + \"%\",\n                    top: 50 + \"%\"\n                }, 500, function () {\n                    $hand.addClass(\"shak\");\n                });\n            }, 300);\n            clickFn();\n        });\n    });\n\n    //点击滚动\n    function clickFn() {\n        clearInterval(timer1);//点击抽奖时清除定时器\n        clearInterval(timer2);\n        clearInterval(timer3);\n        //var random = [1, 2, 3];//抽奖概率\n        //random = random[Math.floor(Math.random() * random.length)];//1-3的随机数\n        var random = 1;\n        //默认先转8圈\n        random += 40;//圈数 * 奖品总数\n        //调用滚动动画\n        for (var i = 1; i <= random; i++) {\n            timer1 = setTimeout(animate(random - 40, i, 0), i * i);//第二个值越大，慢速旋转时间越长\n            timer2 = setTimeout(animate(random - 40, i, 1), 2 * i * i);\n            timer3 = setTimeout(animate(random - 40, i, 2), 3 * i * i);\n        }\n        //停止旋转动画\n        setTimeout(function () {\n            setTimeout(function () {\n                win();\n                roll(10, 10, prizeArr[random - 41]);//随机数 - 41是因为它是从1起始的，又加了40\n            }, 1000);\n        }, 3 * random * random);\n    }\n\n    //滚动动画\n    function animate(r, i, index) {//随机数、循环数，滚动盒子下标\n        return function () {\n            topRoll = parseFloat($roll.eq(index).css(\"top\")) - prizeHigh / 2;//减去每个奖品高的一半\n            topRoll <= topArr[2] && (topRoll = topArr[0]);//滚动到最后一个则返回到第一个\n            $roll.eq(index).css(\"top\", topRoll + \"px\");\n            r + 40 === i && $roll.eq(index).css(\"top\", topArr[r - 1] + \"px\");//循环到最后一次，设定top\n        }\n    }\n\n    //中奖信息滚动。前两个参数为手机号前三位和后四位手机尾号，text为中的奖品\n    function roll(sNum, eNum, text) {\n        //最新中奖信息\n        $sNum.eq(1).html(sNum);\n        $eNum.eq(1).html(eNum);\n        $info.eq(1).html(text);\n        $li.css(\"top\", \"-\" + 36 / 75 + \"rem\");//滚动\n        //滚动之后的处理\n        setTimeout(function () {\n            $li.css({\n                \"top\": \"0\",\n                \"transition\": \"all 0s ease-in-out\"\n            });\n            //更新中奖信息\n            $sNum.eq(0).html($sNum.eq(1).html());\n            $eNum.eq(0).html($eNum.eq(1).html());\n            $info.eq(0).html($info.eq(1).html());\n        }, 500);\n        $li.css(\"transition\", \"all 0.5s ease-in-out\");\n    }\n\n    //中奖信息提示\n\n    $(\"#close,.win,.btn\").click(function () {\n        bool = true;\n    });\n\n    //奖品展示\n    var show = new Swiper(\".swiper-container\", {\n        direction: \"horizontal\",//水平方向滑动。 vertical为垂直方向滑动\n        loop: false,//是否循环\n        slidesPerView: \"auto\"//自动根据slides的宽度来设定数量\n    });\n});\n\n\n\n\n\n\n\n\n\n\n"]}