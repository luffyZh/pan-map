{"version":3,"sources":["template1/js/index.js"],"names":["$maskRule","$","$mask","$winning","$card","$close","win","show","addClass","setTimeout","click","hide","removeClass","queryString","name","replace","regexS","results","RegExp","exec","window","location","search","decodeURIComponent","$hammer","openArr","$tips","$eggList","$egg","$change","length","data","count","arr","rem","cookie","split","i","push","parseFloat","eq","prop","setInterval","reback","hasClass","eggChange","alert","html","css","left","top","expires","Swiper","direction","loop","slidesPerView"],"mappings":"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","file":"js.a577fbee.map","sourceRoot":"..","sourcesContent":["var $maskRule = $(\"#mask-rule\"),//规则遮罩层\n  $mask = $(\"#mask\"),//红包遮罩层\n  $winning = $(\".winning\"),//红包\n  $card = $(\"#card\"),\n  $close = $(\"#close\");\n//link = false;//判断是否在链接跳转中\n\n//规则\n$(\".rule\").click(function () {\n  $maskRule.show();\n});\n$(\"#close-rule\").click(function () {\n  $maskRule.hide();\n});\n\n/*中奖信息提示*/\nfunction win() {\n  //遮罩层显示\n  $mask.show();\n  $winning.addClass(\"reback\");\n  setTimeout(function () {\n    $card.addClass(\"pull\");\n  }, 500);\n\n  //关闭弹出层\n  $(\"#close,.win,.btn\").click(function () {\n    //$close.click(function () {\n    $mask.hide();\n    $winning.removeClass(\"reback\");\n    $card.removeClass(\"pull\");\n  });\n}\n\n//此处可以在commonjs中合并\nfunction queryString(name) {\n  name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n  var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return \"\";\n  }\n  else {\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n}\n\n$(function () {\n    var $hammer = $(\"#hammer\"),\n        $tips = $(\".info\"),\n        $eggList = $(\".egg li\"),//金蛋父级\n        $egg = $(\".goldegg\"),//金蛋\n        $change = $(\"#change\"),//剩余次数\n        length = $egg.length,\n        data = {count: 5},//次数\n        arr = [],\n        openArr,//记录被砸开的蛋的下标数组\n        rem = 75;\n\n    /*轮流提示*/\n    $(function () {\n        if (!!$.cookie(\"eggIndex\")) {//如果存在cookie，也就是有金蛋被砸开\n            openArr = $.cookie(\"eggIndex\").split(\",\");//将cookie变为数组\n            for (var i = 0; i < openArr.length; i++) {\n                arr.push(parseFloat(openArr[i]));//将上次cookie存入数组以免上次cookie被覆盖\n                $egg.eq(parseFloat(openArr[i])).prop(\"src\", \"./image/step3.png\");\n                $egg.eq(parseFloat(openArr[i])).removeClass(\"init\");\n                $egg.eq(parseFloat(openArr[i])).data(\"mark\", false);//更改金蛋状态为已砸开\n            }\n        }\n\n        //初始跳动\n        $egg.eq(length).addClass(\"jump\");\n        $tips.eq(length).show();\n        setInterval(function () {\n            //金蛋跳动\n            length++;\n            length %= 9;\n            $egg.eq(length - 1 < 0 && 8 || length - 1).removeClass(\"jump\");\n            $tips.eq(length - 1 < 0 && 8 || length - 1).hide();\n            reback();\n            $egg.eq(length).addClass(\"jump\");\n            $tips.eq(length).show();\n        }, 1000);\n    });\n\n    //跳过砸开的金蛋\n    function reback() {\n        if (!$egg.eq(length).hasClass(\"init\")) {//若已砸开\n            length++;\n            length %= 9;\n            reback();\n        }\n    }\n\n    /*砸蛋事件*/\n    for (var i = 0; i < length; i++) {\n        $egg.eq(i).data(\"mark\", true);//判断金蛋是否砸开，true表示可砸\n        $eggList.eq(i).data(\"i\", i);\n        $eggList.eq(i).click(function () {\n            //设定剩余抽奖次数，判断用户是否还能点击\n            if (data.count > 0) {\n                $egg.eq($(this).data(\"i\")).data(\"mark\") ? eggChange($(this).data(\"i\")) : alert(\"这枚金蛋已经被您砸开了\");//判断金蛋是否已砸开\n            } else {\n                alert(\"您当前砸蛋次数为0，无法砸蛋\");\n            }\n        });\n    }\n\n    /*砸蛋事件的处理*/\n    function eggChange(i) {\n        //砸蛋次数的变化\n        data.count--;\n        $change.html(data.count);\n        $hammer.removeClass(\"shak\");//清除锤子晃动动画\n        //锤子砸蛋的位置\n        (i === 0 || i === 3 || i === 6) && ($hammer.css(\"left\", 165 / rem + \"rem\"));\n        (i === 1 || i === 4 || i === 7) && ($hammer.css(\"left\", 415 / rem + \"rem\"));\n        (i === 2 || i === 5 || i === 8) && ($hammer.css(\"left\", 665 / rem + \"rem\"));\n        (i === 0 || i === 1 || i === 2) && ($hammer.css(\"top\", 60 / rem + \"rem\"));\n        (i === 3 | i === 4 || i === 5) && ($hammer.css(\"top\", 280 / rem + \"rem\"));\n        (i === 6 | i === 7 || i === 8) && ($hammer.css(\"top\", 500 / rem + \"rem\"));\n        //锤子返回\n        setTimeout(function () {\n            $hammer.css({\n                left: 665 / rem + \"rem\",\n                top: 60 / rem + \"rem\"\n            });\n        }, 1500);\n\n        //金蛋破裂及锤子动画\n        setTimeout(function () {\n            $hammer.addClass(\"hit\");\n            setTimeout(function () {\n                $egg.eq(i).prop(\"src\", \"./image/step3.png\");\n            }, 300);\n            setTimeout(function () {\n                $egg.eq(i).removeClass(\"init\");\n                win();\n                $hammer.removeClass(\"hit\");//清除锤子砸蛋动画\n                $hammer.addClass(\"shak\");\n\n                //记录被砸开的蛋\n                arr.push(i);//存入每个砸开蛋的下标\n                $.cookie(\"eggIndex\", arr, {expires: 1});//存入cookie\n            }, 600);\n        }, 600);\n        $egg.eq(i).data(\"mark\", false);//更改金蛋状态为已砸开\n    }\n\n    //奖品展示\n    var show = new Swiper(\".swiper-container\", {\n        direction: \"horizontal\",//水平方向滑动。 vertical为垂直方向滑动\n        loop: false,//是否循环\n        slidesPerView: \"auto\"//自动根据slides的宽度来设定数量\n    });\n});\n\n\n\n\n\n"]}