{"version":3,"sources":["template4/js/index.js"],"names":["$maskRule","$","$mask","$winning","$card","$close","win","show","addClass","setTimeout","click","hide","removeClass","queryString","name","replace","regexS","results","RegExp","exec","window","location","search","decodeURIComponent","$blin","timer","$prize","not","$change","$btn","length","data","count","bool","mark","init","setInterval","toggleClass","eq","html","clickFn","clearInterval","random","Math","floor","i","console","log","alert","Swiper","direction","loop","slidesPerView"],"mappings":";AAAA,IAAIA,EAAYC,EAAE,cAChBC,EAAQD,EAAE,SACVE,EAAWF,EAAE,YACbG,EAAQH,EAAE,SACVI,EAASJ,EAAE,UAYb,SAASK,IAEPJ,EAAMK,OACNJ,EAASK,SAAS,UAClBC,WAAW,WACTL,EAAMI,SAAS,SACd,KAGHP,EAAE,oBAAoBS,MAAM,WAE1BR,EAAMS,OACNR,EAASS,YAAY,UACrBR,EAAMQ,YAAY,UAKtB,SAASC,EAAYC,GACnBA,EAAOA,EAAKC,QAAQ,OAAQ,OAAQA,QAAQ,OAAQ,OAChDC,IAEAC,EADQ,IAAIC,OADH,SAAWJ,EAAO,aAEXK,KAAKC,OAAOC,SAASC,QACrCL,OAAY,OAAZA,EACK,GAGAM,mBAAmBN,EAAQ,GAAGF,QAAQ,MAAO,MAnCxDd,EAAE,SAASS,MAAM,WACfV,EAAUO,SAEZN,EAAE,eAAeS,MAAM,WACrBV,EAAUW,SAmCZV,EAAE,WACMuB,IAQAC,EARAD,EAAQvB,EAAE,YACVyB,EAASzB,EAAE,YAAY0B,IAAI,QAC3BC,EAAU3B,EAAE,WACZ4B,EAAO5B,EAAE,QACT6B,EAASJ,EAAOI,OAChBC,EAAO,CAACC,MAAO,GACfC,GAAO,EACPC,EAAO,EAKFC,SAAAA,IACLV,EAAQW,YAAY,WAEhBZ,EAAMa,YAAY,QAElBP,IACAA,GAAU,EACVJ,EAAOY,GAAGR,EAAS,GAAGlB,YAAY,UAClCc,EAAOY,GAAGR,GAAQtB,SAAS,UAG3B0B,IACAA,GAAQ,GACT,KAfPC,IAmBAN,EAAKnB,MAAM,WACHuB,IACAA,GAAO,EACHF,EAAKC,MAAQ,GACbD,EAAKC,QACLJ,EAAQW,KAAKR,EAAKC,OASrBQ,WACLC,cAAchB,GACViB,IAAAA,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAEnCA,EAASA,EAAOC,KAAKC,MAAMD,KAAKD,SAAWA,EAAOZ,SAClDI,GAAQQ,EAGK,IAFbR,GAAQ,KAGJQ,IACAR,KAES,IAATA,IACAQ,IACAR,KAGJQ,GAAU,GAEL,IAAA,IAAIG,EAAI,EAAGA,GAAKH,EAAQG,IACzBpC,WAcG,WACHe,EAAMa,YAAY,QAElBP,IACAA,GAAU,EACVJ,EAAOY,GAAGR,EAAS,GAAGlB,YAAY,UAClCc,EAAOY,GAAGR,GAAQtB,SAAS,WApBL,EAAIqC,EAAIA,GAGlCpC,WAAW,WACPqC,QAAQC,IAAI,KAAOb,GACnBzB,WAAW,WACPwB,GAAO,EACP3B,KACD,MACJ,EAAIoC,EAASA,GArCRF,IAEAQ,MAAM,sBAmDlB/C,EAAE,oBAAoBS,MAAM,WACxB+B,cAAchB,GACdU,MAIO,IAAIc,OAAO,oBAAqB,CACvCC,UAAW,aACXC,MAAM,EACNC,cAAe","file":"js.7f5fbbea.map","sourceRoot":"..","sourcesContent":["var $maskRule = $(\"#mask-rule\"),//规则遮罩层\n  $mask = $(\"#mask\"),//红包遮罩层\n  $winning = $(\".winning\"),//红包\n  $card = $(\"#card\"),\n  $close = $(\"#close\");\n//link = false;//判断是否在链接跳转中\n\n//规则\n$(\".rule\").click(function () {\n  $maskRule.show();\n});\n$(\"#close-rule\").click(function () {\n  $maskRule.hide();\n});\n\n/*中奖信息提示*/\nfunction win() {\n  //遮罩层显示\n  $mask.show();\n  $winning.addClass(\"reback\");\n  setTimeout(function () {\n    $card.addClass(\"pull\");\n  }, 500);\n\n  //关闭弹出层\n  $(\"#close,.win,.btn\").click(function () {\n    //$close.click(function () {\n    $mask.hide();\n    $winning.removeClass(\"reback\");\n    $card.removeClass(\"pull\");\n  });\n}\n\n//此处可以在commonjs中合并\nfunction queryString(name) {\n  name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n  var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return \"\";\n  }\n  else {\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  }\n}\n\n$(function () {\n    var $blin = $(\".light p\"),//所有彩灯\n        $prize = $(\".play li\").not(\"#btn\"),//含谢谢参与的所有奖品\n        $change = $(\"#change\"),//显示剩余机会\n        $btn = $(\"#btn\"),//开始抽奖按钮\n        length = $prize.length,//奖品总数\n        data = {count: 5},//次数\n        bool = true,//判断是否可点击,true为可点击\n        mark = 0,//标记当前位置，区间为0-7\n        timer;//定时器\n\n    init();\n    //默认动画效果\n    function init() {\n        timer = setInterval(function () {\n            //不能调用animate函数，不然标记会有问题\n            $blin.toggleClass(\"blin\");//彩灯动画\n            //九宫格动画\n            length++;\n            length %= 8;\n            $prize.eq(length - 1).removeClass(\"select\");\n            $prize.eq(length).addClass(\"select\");\n\n            //位置标记的改变\n            mark++;\n            mark %= 8;\n        }, 1000);\n    }\n\n    //点击抽奖\n    $btn.click(function () {\n        if (bool) {//若未按下\n            bool = false;\n            if (data.count > 0) {//若还有次数\n                data.count--;\n                $change.html(data.count);\n                clickFn();\n            } else {\n                alert(\"您剩余抽奖次数为0，不能抽奖~\");\n            }\n        }\n    });\n\n    //点击旋转\n    function clickFn() {\n        clearInterval(timer);//点击抽奖时清除定时器\n        var random = [1, 2, 3, 4, 5, 6, 7, 8];//抽奖概率\n        //data为随机出来的结果，根据概率后的结果\n        random = random[Math.floor(Math.random() * random.length)];//1-8的随机数\n        mark += random;\n        mark %= 8;\n        //控制概率，永远抽不中谢谢参与\n        if (mark === 3) {//抽中第一个谢谢参与则向前一位\n            random++;\n            mark++;\n        }\n        if (mark === 6) {//抽中第二个谢谢参与则向后一位\n            random--;\n            mark--;\n        }\n        //默认先转4圈\n        random += 32;//圈数 * 奖品总数\n        //调用旋转动画\n        for (var i = 1; i <= random; i++) {\n            setTimeout(animate(), 2 * i * i);//第二个值越大，慢速旋转时间越长\n        }\n        //停止旋转动画\n        setTimeout(function () {\n            console.log(\"中了\" + mark);\n            setTimeout(function () {\n                bool = true;\n                win();\n            }, 1000);\n        }, 2 * random * random);\n    }\n\n    //动画效果\n    function animate() {\n        return function () {\n            $blin.toggleClass(\"blin\");//彩灯动画\n            //九宫格动画\n            length++;\n            length %= 8;\n            $prize.eq(length - 1).removeClass(\"select\");\n            $prize.eq(length).addClass(\"select\");\n        }\n    }\n\n    //中奖信息提示\n    $(\"#close,.win,.btn\").click(function () {\n        clearInterval(timer);//关闭弹出时清除定时器\n        init();\n    });\n\n    //奖品展示\n    var show = new Swiper(\".swiper-container\", {\n        direction: \"horizontal\",//水平方向滑动。 vertical为垂直方向滑动\n        loop: false,//是否循环\n        slidesPerView: \"auto\"//自动根据slides的宽度来设定数量\n    });\n});\n\n\n\n\n\n"]}